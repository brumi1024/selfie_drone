<!doctype html>
<html>

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<title>Drone App</title>
	<script src="/dronestream/nodecopter-client.js"></script>
	<script src="js/lib/core.min.js"></script>
	<script src="js/lib/tf.min.js"> </script>

	<script defer src="js/lib/face-api.min.js"></script>
	<script src="js/lib/materialize.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>

	<link rel="stylesheet" href="styles.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href="materialize.min.css">
	
</head>

<body>
	<div id="fb-root"></div>
	<script async defer crossorigin="anonymous" src="https://connect.facebook.net/hu_HU/sdk.js#xfbml=1&version=v6.0"></script>
	<div style="text-align:center">
		<h1>
			Drone App
		</h1>
	</div>

	<div class="splitContainer" id="live-view">
		<div id="droneControl">
			<div class="row">
				<div class="col s12 m14">
					<div class="card">
						<div class="card-image">
	                        <video id="video" width="640" height="360" autoplay muted></video>
							<div id="droneStream"></div>

							<span class="card-title" id="liveViewText">Live Image</span>
							<span class="card-title" id="photoWillBeCreatedText">Photo will be created...</span>
							<span class="card-title" id="photoCreatedText">Photo created!</span>
						</div>
						<div class="card-content">
							<p>Use WASD buttons to move around, QE to turn and XC to increase or decrease height.</p>
						</div>
						<div class="card-action">
							<button class="btn waves-effect waves-light" onclick="sendCommand('takeoff')">Takeoff</button>
							<button class="btn waves-effect waves-light" onclick="sendCommand('land')">Land</button>
							<button class="btn waves-effect waves-light" onclick="sendCommand('stop')">Stop</button>
							<button class="btn waves-effect waves-light" onclick="sendCommand('auto')">Autonomous Flight</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col s16 m14">
				<div class="card blue-grey darken-1">
					<div class="card-content white-text fix-size">
						<span class="card-title activator white-text text-darken-4">Status<i class="material-icons right">more_vert</i></span>
						<p>Last command sent: <span id="last_command"></span> </p>
						<p>Battery: <span id="battery"></span> </p>
						<p>State: <span id="state"></span> </p>
					</div>
				
					<div class="card-reveal">
						<span class="card-title grey-text text-darken-4">Settings<i class="material-icons right">close</i></span>
						<p>Speed: <input type="number" id="droneSpeed" name="speed"></p>
						<button class="btn waves-effect waves-light" onclick="setSpeed()">Save</button>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
				<div class="col s12 m14">
					<div class="card">
						<div class="card-image">
							<canvas width="720" height="540" id="picture"></canvas>

							<span class="card-title">Last photo</span>
						</div>
						<div class="card-content">
							<p>Upon detecting a face and a thumbs up gesture a photo will be automatically created.</p>
						</div>
						<div class="card-action" id="pictureControls">
							<a id="downloadBtn" class="btn waves-effect waves-light">Save Picture</a>
							<button id="uploadBtn" class="btn waves-effect waves-light" onclick="upload()" disabled>Upload Picture</button>
						</div>
					</div>
				</div>
			</div>
	</div>

	<script type="text/javascript" charset="utf-8" src="js/controller.js"></script>
	<script defer type="text/javascript" charset="utf-8" src="js/tfwrapper.js"></script>
	<script defer type="text/javascript" charset="utf-8" src="js/facedetect.js"></script>
</body>

</html>